<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PawShelter - Cage Monitor</title>
    <link rel="icon" type="image/png" href="../../images/icon/PawShelter.png">
    <link rel="shortcut icon" type="image/png" href="../../images/icon/PawShelter.png">
    <link rel="apple-touch-icon" href="../../images/icon/PawShelter.png">
    <link rel="stylesheet" href="../../css/base.css">
    <link rel="stylesheet" href="cage.css">
</head>

<body>
    <div class="app">
        <!-- SIDEBAR loaded dynamically from sidebar.html -->

        <!-- MAIN CONTENT -->
        <main class="main-content" id="mainContent">
            <!-- CONTENT -->
            <div class="content">
                <!-- CAGE MONITOR SECTION -->
                <section class="page-section active" id="cage-section">
                    <div class="cctv-container">
                        <div class="CCTV-header">
                            <h1 class="h1-cctv-header">Cage Monitor: <span id="currentSpeciesName">All Species</span></h1>
                        </div>
                  
                        <!-- ALL SPECIES MULTI-VIEW -->
                        <div class="cctv-display-wrapper" id="allSpeciesView">
                            <div class="dashboard-layout">
                                <!-- Main large screen (left side) -->
                                <div class="main-cctv-section">
                                    <div class="main-cctv-card active" id="mainGoatView">
                                        <div class="cctv-feed-header">
                                            <span class="animal-icon">üêê</span>
                                            <h3>Goat Enclosure</h3>
                                            <span class="main-label">MAIN VIEW</span>
                                        </div>
                                        <div class="cctv-feed-wrapper main-video-wrapper">
                                            <video class="cctv-video main-video" autoplay loop muted playsinline>
                                                <source src="../../videos/goat.MOV" type="video/mp4">
                                                Your browser does not support the video tag.
                                            </video>
                                            <div class="cctv-overlay">
                                                <span class="rec-dot"></span>
                                                <span>LIVE</span>
                                            </div>
                                        </div>
                                        <!-- View Details Button -->
                                        <button class="view-details-btn" onclick="switchCCTVFeed('Goat')">
                                            <span class="btn-icon">üîç</span>
                                            View Cage Details
                                        </button>
                                    </div>
                                </div>

                                <!-- Side panel with 2 vertical screens (right side) -->
                                <div class="side-panel-section">                                    
                                    <!-- Sugar Glider -->
                                    <div class="side-cctv-card" onclick="switchToMainView('Sugarglider')">
                                        <div class="side-card-header">
                                            <span class="animal-icon">üêøÔ∏è</span>
                                            <h4>Sugar Glider</h4>
                                            <button class="view-small-btn" onclick="switchCCTVFeed('Sugarglider')">
                                                View Details
                                            </button>
                                        </div>
                                        <div class="side-video-wrapper">
                                            <video class="side-video" autoplay loop muted playsinline>
                                                <source src="../../videos/sugarglider.MOV" type="video/mp4">
                                            </video>
                                            <div class="side-overlay">
                                                <span class="rec-dot small"></span>
                                                <span>LIVE</span>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Alligator -->
                                    <div class="side-cctv-card" onclick="switchToMainView('Alligator')">
                                        <div class="side-card-header">
                                            <span class="animal-icon">üêä</span>
                                            <h4>Alligator</h4>
                                            <button class="view-small-btn" onclick="switchCCTVFeed('Alligator')">
                                                View Details
                                            </button>
                                        </div>
                                        <div class="side-video-wrapper">
                                            <video class="side-video" autoplay loop muted playsinline>
                                                <source src="../../videos/alligator.mp4" type="video/mp4">
                                            </video>
                                            <div class="side-overlay">
                                                <span class="rec-dot small"></span>
                                                <span>LIVE</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Bottom panel with 4 horizontal screens -->
                                <div class="bottom-panel-section">
                                    <div class="bottom-cctv-grid">
                                        <!-- Porcupine -->
                                        <div class="bottom-cctv-card" onclick="switchToMainView('Porcupine')">
                                            <div class="bottom-card-header">
                                                <span class="animal-icon">ü¶î</span>
                                                <h4>Porcupine</h4>
                                                <button class="view-small-btn" onclick="switchCCTVFeed('Porcupine')">
                                                    View Details
                                                </button>
                                            </div>
                                            <div class="bottom-video-wrapper">
                                                <video class="bottom-video" autoplay loop muted playsinline>
                                                    <source src="../../videos/porcupine.MP4" type="video/mp4">
                                                </video>
                                                <div class="bottom-overlay">
                                                    <span class="rec-dot small"></span>
                                                    <span>LIVE</span>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- Fox -->
                                        <div class="bottom-cctv-card" onclick="switchToMainView('Fox')">
                                            <div class="bottom-card-header">
                                                <span class="animal-icon">ü¶ä</span>
                                                <h4>Fox</h4>
                                                <button class="view-small-btn" onclick="switchCCTVFeed('Fox')">
                                                    View Details
                                                </button>
                                            </div>
                                            <div class="bottom-video-wrapper">
                                                <video class="bottom-video" autoplay loop muted playsinline>
                                                    <source src="../../videos/fox.MP4" type="video/mp4">
                                                </video>
                                                <div class="bottom-overlay">
                                                    <span class="rec-dot small"></span>
                                                    <span>LIVE</span>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- Snail -->
                                        <div class="bottom-cctv-card" onclick="switchToMainView('Snail')">
                                            <div class="bottom-card-header">
                                                <span class="animal-icon">üêå</span>
                                                <h4>Snail</h4>
                                                <button class="view-small-btn" onclick="switchCCTVFeed('Snail')">
                                                    View Details
                                                </button>
                                            </div>
                                            <div class="bottom-video-wrapper">
                                                <video class="bottom-video" autoplay loop muted playsinline>
                                                    <source src="../../videos/snail.MOV" type="video/mp4">
                                                </video>
                                                <div class="bottom-overlay">
                                                    <span class="rec-dot small"></span>
                                                    <span>LIVE</span>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- Goat (duplicate for symmetry in bottom panel) -->
                                        <div class="bottom-cctv-card active" onclick="switchToMainView('Goat')">
                                            <div class="bottom-card-header">
                                                <span class="animal-icon">üêê</span>
                                                <h4>Goat</h4>
                                                <button class="view-small-btn" onclick="switchCCTVFeed('Goat')">
                                                    View Details
                                                </button>                                                
                                            </div>
                                            <div class="bottom-video-wrapper">
                                                <video class="bottom-video" autoplay loop muted playsinline>
                                                    <source src="../../videos/goat.MOV" type="video/mp4">
                                                </video>
                                                <div class="bottom-overlay">
                                                    <span class="rec-dot small"></span>
                                                    <span>LIVE</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- SINGLE SPECIES VIEW (Hidden by default) -->
                        <div class="cctv-display-wrapper hidden" id="singleSpeciesView">
                            <!-- Species tabs only visible in single species view -->
                            <div class="species-tabs-container">
                                <div class="species-tabs">
                                    <div class="species-tab" onclick="switchCCTVFeed('All')" data-species="All">üêæ All Species</div>
                                    <div class="species-tab active" onclick="switchCCTVFeed('Goat')" data-species="Goat">üêê Goats</div>
                                    <div class="species-tab" onclick="switchCCTVFeed('Sugarglider')" data-species="Sugarglider">üêøÔ∏è Sugar Gliders</div>
                                    <div class="species-tab" onclick="switchCCTVFeed('Alligator')" data-species="Alligator">üêä Alligators</div>
                                    <div class="species-tab" onclick="switchCCTVFeed('Snail')" data-species="Snail">üêå Snails</div>
                                    <div class="species-tab" onclick="switchCCTVFeed('Porcupine')" data-species="Porcupine">ü¶î Porcupines</div>
                                    <div class="species-tab" onclick="switchCCTVFeed('Fox')" data-species="Fox">ü¶ä Foxes</div>
                                </div>
                            </div>

                            <!-- FIRST WRAPPER: Camera Controls Wrapper -->
                            <div class="camera-controls-wrapper">
                                <div class="cctv-feed" id="cctvFeed">
                                    <video class="cctv-video" id="cctvVideo" autoplay loop muted playsinline>
                                        <source src="../../videos/goat.MOV" type="video/mp4">
                                        Your browser does not support the video tag.
                                    </video>
                                    <div class="cctv-placeholder" id="cctvPlaceholder">üìπ</div>
                                    <div class="cctv-overlay">
                                        <span class="rec-dot"></span>
                                        <span>LIVE</span>
                                    </div>
                                    <div class="camera-position-indicator" id="cameraPosition">Center</div>
                                </div>

                                <!-- Recording Banner -->
                                <div class="recording-banner hidden" id="recordingBanner">
                                    <span class="recording-dot"></span>
                                    <span class="recording-text">RECORDING</span>
                                </div>
                                
                                <!-- Screenshot Notification -->
                                <div class="screenshot-notification hidden" id="screenshotNotification">
                                    <span class="screenshot-icon">üì∑</span>
                                    <span class="screenshot-text">Screenshot Saved!</span>
                                </div>

                                <!-- NEW: Right Side Controls Container -->
                                <div class="camera-right-side">
                                    <div class="camera-controls-card">
                                        <div class="camera-controls">
                                            <div class="control-row">
                                                <button class="camera-btn" id="btnUp" onclick="moveCamera('up')" title="Look Up">
                                                    <span>‚ñ≤</span>
                                                </button>
                                            </div>
                                            <div class="control-row">
                                                <button class="camera-btn" id="btnLeft" onclick="moveCamera('left')" title="Look Left">
                                                    <span>‚óÑ</span>
                                                </button>
                                                <button class="camera-btn camera-btn-center" id="btnCenter" onclick="centerCamera()" title="Center Camera">
                                                    <!-- <span>Center</span> -->
                                                </button>
                                                <button class="camera-btn" id="btnRight" onclick="moveCamera('right')" title="Look Right">
                                                    <span>‚ñ∫</span>
                                                </button>
                                            </div>
                                            <div class="control-row">
                                                <button class="camera-btn" id="btnDown" onclick="moveCamera('down')" title="Look Down">
                                                    <span>‚ñº</span>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="camera-action-buttons-wrapper">
                                        <div class="camera-action-buttons">
                                            <button class="action-btn record-btn" id="recordBtn" onclick="toggleRecording()" title="Start Recording">
                                                <span class="action-icon">üî¥</span>
                                                <span class="action-label">Record</span>
                                            </button>
                                            <button class="action-btn screenshot-btn" id="screenshotBtn" onclick="takeScreenshot()" title="Take Screenshot">
                                                <span class="action-icon">‚õ∂</span>
                                                <span class="action-label">Screenshot</span>
                                            </button>
                                        </div>
                                        <div class="camera-action-buttons">
                                            <button class="action-btn history-btn" id="historyBtn" title="Recording History">
                                                <span class="action-icon">üíæ</span>
                                                <span class="action-label">Recording History</span>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- SECOND WRAPPER: Condition and Controller Grid Wrapper -->
                            <div class="condition-controller-wrapper">
                                <div class="condition-grid">
                                    <!-- Temperature -->
                                    <div class="condition-card" data-metric="temperature">
                                        <div class="condition-icon">üå°Ô∏è</div>
                                        <div class="condition-content">
                                            <div class="metric-label">Temperature</div>
                                            <div class="metric-value">22¬∞C</div>
                                            <div class="metric-range">(10-25¬∞C)</div>
                                            <div class="metric-status optimal">Optimal</div>
                                        </div>
                                    </div>
                                    
                                    <!-- Humidity -->
                                    <div class="condition-card" data-metric="humidity">
                                        <div class="condition-icon">üíß</div>
                                        <div class="condition-content">
                                            <div class="metric-label">Humidity</div>
                                            <div class="metric-value">65%</div>
                                            <div class="metric-range">(40-70%)</div>
                                            <div class="metric-status optimal">Optimal</div>
                                        </div>
                                    </div>
                                    
                                    <!-- Air Quality -->
                                    <div class="condition-card" data-metric="air-quality">
                                        <div class="condition-icon">üí®</div>
                                        <div class="condition-content">
                                            <div class="metric-label">Air Quality</div>
                                            <div class="metric-value">Good</div>
                                            <div class="metric-range">CO‚ÇÇ: 450ppm</div>
                                            <div class="metric-status optimal">Optimal</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="controller-grid">
                                    <!-- Lighting Control -->
                                    <div class="controller-card">
                                        <div class="controller-header">
                                            <span class="controller-icon">üí°</span>
                                            <h3>Lighting</h3>
                                        </div>
                                        <div class="controller-value" id="currentLightLevel">50%</div>
                                        
                                        <!-- Light Slider -->
                                        <div class="light-controls">
                                            <input type="range" class="light-slider" id="lightSlider" 
                                                min="0" max="100" value="50" 
                                                oninput="handleLightSliderChange()">
                                            <div class="slider-labels">
                                                <span>0%</span>
                                                <span>50%</span>
                                                <span>100%</span>
                                            </div>
                                        </div>
                                        
                                        <div class="lighting-presets">
                                            <button class="preset-btn" onclick="setLightingPreset('night')">üåô</button>
                                            <button class="preset-btn" onclick="setLightingPreset('day')">‚òÄÔ∏è</button>
                                            <button class="preset-btn" onclick="setLightingPreset('uvb')">üîÜ</button>
                                        </div>
                                    </div>

                                    <!-- Ventilation Control -->
                                    <div class="controller-card">
                                        <div class="controller-header">
                                            <span class="controller-icon">üí®</span>
                                            <h3>Ventilation</h3>
                                        </div>
                                        <div class="controller-value" id="fanSpeed">Low</div>
                                        <div class="fan-controls">
                                            <button class="fan-btn" onclick="setFanSpeed('low')">Low</button>
                                            <button class="fan-btn" onclick="setFanSpeed('medium')">Med</button>
                                            <button class="fan-btn" onclick="setFanSpeed('high')">High</button>
                                        </div>
                                        
                                        <!-- Auto Ventilation Toggle -->
                                        <div class="auto-ventilation-toggle">
                                            <span class="toggle-label">Auto Ventilation</span>
                                            <label class="toggle-switch">
                                                <input type="checkbox" onchange="toggleAutoVentilation()">
                                                <span class="toggle-slider"></span>
                                            </label>
                                        </div>
                                    </div>

                                    <!-- Cage Lock -->
                                    <div class="controller-card">
                                        <div class="controller-header">
                                            <span class="controller-icon">üîí</span>
                                            <h3>Cage Lock</h3>
                                        </div>
                                        <div class="controller-value" id="lockStatus">
                                            <span class="status-indicator unlocked"></span>
                                            <span class="status-text">Unlocked</span>
                                        </div>
                                        <div class="lock-controls">
                                            <button class="lock-btn" onclick="toggleCageLock()" id="lockToggle">
                                                Lock Cage
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- TOAST -->
    <!-- <div class="toast" id="toast"></div> -->

    <script src="../data.js"></script>
    <script src="../sidebar.js"></script>
    <script src="../utils.js"></script>
    <script src="cage.js"></script>
</body>

</html>